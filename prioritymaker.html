<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Priority Maker â€” Sam Freund</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CDN -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" crossorigin="anonymous">

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- Style CSS -->
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/prioritymaker.css">
	<link rel="icon" type="image/x-icon" href="/images/icons/smalllogo.ico">
</head>
<body>
	<nav id="navigation" class="navbar navbar-expand-lg">
		<a class="navbar-brand" href="index.html">SF</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" href="index.html">About</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="experience.html">Experience</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="portfolio.html">Portfolio</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="blog.html">Blog</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="index.html#contact">Contact</a>
				</li>
			</ul>
		</div>
	</nav>

	<main class="pm-section">
		<div class="container" style="max-width: 800px;">
			<div class="pm-header">
				<h1>PRIORITY MAKER</h1>
				<p>Add tasks, rate their properties, and export your prioritized list</p>
			</div>

			<!-- Input Form -->
			<div class="pm-form-card">
				<form class="pm-form" id="taskForm" onsubmit="return addTask(event)">
					<div class="pm-field pm-field-name">
						<label for="taskName">Task Name</label>
						<input type="text" id="taskName" placeholder="What needs to be done?" required>
					</div>
					<div class="pm-field pm-field-select">
						<label for="taskImpact">Impact</label>
						<select id="taskImpact">
							<option value="High">High</option>
							<option value="Medium" selected>Medium</option>
							<option value="Low">Low</option>
						</select>
					</div>
					<div class="pm-field pm-field-select">
						<label for="taskTime">Time</label>
						<select id="taskTime">
							<option value="High">High</option>
							<option value="Medium" selected>Medium</option>
							<option value="Low">Low</option>
						</select>
					</div>
					<div class="pm-field pm-field-select">
						<label for="taskComplexity">Complexity</label>
						<select id="taskComplexity">
							<option value="High">High</option>
							<option value="Medium" selected>Medium</option>
							<option value="Low">Low</option>
						</select>
					</div>
					<button type="submit" class="pm-btn pm-btn-primary">
						<i class="fas fa-plus"></i> Add
					</button>
				</form>
			</div>

			<!-- Action Bar -->
			<div class="pm-actions" id="actionBar" style="display: none;">
				<button class="pm-btn pm-btn-primary" onclick="exportCSV()">
					<i class="fas fa-file-csv"></i> Export CSV
				</button>
				<button class="pm-btn pm-btn-secondary" onclick="copyToClipboard()">
					<i class="fas fa-clipboard"></i> Copy to Clipboard
				</button>
				<button class="pm-btn pm-btn-danger" onclick="clearAll()">
					<i class="fas fa-trash"></i> Clear All
				</button>
			</div>

			<!-- Task List -->
			<div class="pm-list" id="taskList"></div>
		</div>
	</main>

	<div class="contactSection section">
		<div class="container">
			<div class="row">
				<div class="col-12 text-center">
					<h2>Let's chat!</h2>
					<p class="subHeading">If you'd like to get in contact feel free to drop me an e-mail here.</p>
					<a href="mailto:sambfreund@gmail.com" class="contactButton">sambfreund@gmail.com</a>
				</div>
			</div>
		</div>
	</div>

	<footer class="copyrightSection">
		<p>&copy; Sam Freund 2025</p>
	</footer>

	<div class="pm-toast" id="toast"></div>

	<!-- Bootstrap CDN -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

	<script>
		var tasks = [];

		function scoreValue(level) {
			if (level === 'High') return 3;
			if (level === 'Medium') return 2;
			return 1;
		}

		function priorityScore(task) {
			return scoreValue(task.impact) - scoreValue(task.time) - scoreValue(task.complexity);
		}

		function addTask(e) {
			e.preventDefault();
			var name = document.getElementById('taskName').value.trim();
			if (!name) return false;

			tasks.push({
				id: Date.now(),
				name: name,
				impact: document.getElementById('taskImpact').value,
				time: document.getElementById('taskTime').value,
				complexity: document.getElementById('taskComplexity').value
			});

			document.getElementById('taskName').value = '';
			document.getElementById('taskImpact').value = 'Medium';
			document.getElementById('taskTime').value = 'Medium';
			document.getElementById('taskComplexity').value = 'Medium';
			document.getElementById('taskName').focus();

			renderTasks();
			return false;
		}

		function deleteTask(id) {
			tasks = tasks.filter(function(t) { return t.id !== id; });
			renderTasks();
		}

		function clearAll() {
			if (tasks.length === 0) return;
			tasks = [];
			renderTasks();
			showToast('All tasks cleared');
		}

		function renderTasks() {
			var list = document.getElementById('taskList');
			var actions = document.getElementById('actionBar');

			if (tasks.length === 0) {
				list.innerHTML = '<div class="pm-empty">'
					+ '<i class="fas fa-list-check"></i>'
					+ 'Add a task above to get started'
					+ '</div>';
				actions.style.display = 'none';
				return;
			}

			actions.style.display = '';

			var sorted = tasks.slice().sort(function(a, b) {
				return priorityScore(b) - priorityScore(a);
			});

			var html = '';
			for (var i = 0; i < sorted.length; i++) {
				var t = sorted[i];
				html += '<div class="pm-task">'
					+ '<span class="pm-task-rank">' + (i + 1) + '</span>'
					+ '<span class="pm-task-name">' + escapeHtml(t.name) + '</span>'
					+ '<div class="pm-task-badges">'
					+ badge('Impact', t.impact)
					+ badge('Time', t.time)
					+ badge('Complexity', t.complexity)
					+ '</div>'
					+ '<button class="pm-task-delete" onclick="deleteTask(' + t.id + ')" title="Delete task">'
					+ '<i class="fas fa-xmark"></i>'
					+ '</button>'
					+ '</div>';
			}

			list.innerHTML = html;
		}

		function badge(label, level) {
			var cls = 'pm-badge-' + level.toLowerCase();
			return '<span class="pm-badge ' + cls + '">'
				+ '<span class="pm-badge-label">' + label + '</span> '
				+ level
				+ '</span>';
		}

		function escapeHtml(str) {
			var div = document.createElement('div');
			div.textContent = str;
			return div.innerHTML;
		}

		function exportCSV() {
			if (tasks.length === 0) return;

			var sorted = tasks.slice().sort(function(a, b) {
				return priorityScore(b) - priorityScore(a);
			});

			var lines = ['Rank,Task,Impact,Time,Complexity'];
			for (var i = 0; i < sorted.length; i++) {
				var t = sorted[i];
				var name = '"' + t.name.replace(/"/g, '""') + '"';
				lines.push((i + 1) + ',' + name + ',' + t.impact + ',' + t.time + ',' + t.complexity);
			}

			var blob = new Blob([lines.join('\n')], { type: 'text/csv' });
			var url = URL.createObjectURL(blob);
			var a = document.createElement('a');
			a.href = url;
			a.download = 'priorities.csv';
			a.click();
			URL.revokeObjectURL(url);

			showToast('CSV downloaded');
		}

		function copyToClipboard() {
			if (tasks.length === 0) return;

			var sorted = tasks.slice().sort(function(a, b) {
				return priorityScore(b) - priorityScore(a);
			});

			var lines = ['#  | Task | Impact | Time | Complexity', '---|------|--------|------|----------'];
			for (var i = 0; i < sorted.length; i++) {
				var t = sorted[i];
				lines.push((i + 1) + '  | ' + t.name + ' | ' + t.impact + ' | ' + t.time + ' | ' + t.complexity);
			}

			navigator.clipboard.writeText(lines.join('\n')).then(function() {
				showToast('Copied to clipboard');
			});
		}

		renderTasks();

		function showToast(msg) {
			var el = document.getElementById('toast');
			el.textContent = msg;
			el.classList.add('visible');
			setTimeout(function() {
				el.classList.remove('visible');
			}, 2000);
		}
	</script>
</body>
</html>
